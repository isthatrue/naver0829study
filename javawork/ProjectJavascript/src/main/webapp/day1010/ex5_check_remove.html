<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&family=Lobster&family=Nanum+Pen+Script&family=Permanent+Marker&family=Single+Day&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<style>
    body * {
        font-family: 'Jua';
    }
    figure.photo {
      float: left;
      margin-right: 10px;
    }
    
    figure.photo img {
      width: 100px;
      height: 130px;
    }
    figure.photo figcaption {
      text-align: center;
    }
    div.buttons button {
      width: 200px;
      margin-right: 10px;
    }
    
</style>
<script>
  $(function() {
    init_photo();
    
    // 전체 선택
    $("#ckall").click(function() {
      // 체크 값 얻기
      let ck = $(this).is(":checked");
      // 사진의 체크 값에 보내기
      $(".ckdel").prop("checked", ck); // treu, false 값을 보낼 경우 attr 보다는 prop 권장
    });
    
    // 다시 나타내기
    $("#btn2").click(function() {
      init_photo();
    });
    
    // 선택 사진 삭제
    $("#btn1").click(function() {
      $(".ckdel:checked").each(function() {
        //$(this).parent().parent().parent().remove();
        $(this).parents("figure.photo").remove(); // 전체 부모들중 특정 부모 찾기
      });
      $("#ckall").prop("checked", false);
    });
  });
  
  function init_photo(){
    let s = "";
    for(let i = 1; i <= 20; i++) {
      s +=
        `
          <figure class="photo">
            <img src = "../image/${i}.jpg">
            <figcaption>
              <label for="">
                <input type="checkbox" class="ckdel" />삭제
              </label>
            </figcaption>
          </figure>
        `;
    }
    
    $(".view").html(s);
  }
  
</script>    
<title>Insert title here</title>
</head>
<body>
  <div class="buttons">
    <label for=""><input type="checkbox" id="ckall" />전체선택</label>
    <button type = "button" class="btn btn-secondary" id = "btn1">선택 삭제</button>
    <button type = "button" class="btn btn-secondary" id = "btn2">불러오기</button>
  </div>
  <div class="view" style="margin-top : 30px"></div>
</body>
</html>